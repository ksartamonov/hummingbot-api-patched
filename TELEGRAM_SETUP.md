# Настройка Telegram бота для уведомлений о бектестинге

## Шаг 1: Создание Telegram бота

1. Откройте Telegram и найдите @BotFather
2. Отправьте команду `/newbot`
3. Следуйте инструкциям:
   - Введите имя бота (например, "Hummingbot Backtesting Bot")
   - Введите username бота (должен заканчиваться на 'bot', например "hummingbot_backtesting_bot")
4. BotFather выдаст вам токен бота - сохраните его

## Шаг 2: Получение Chat ID

### Вариант 1: Для личных сообщений
1. Добавьте бота в контакты
2. Отправьте боту любое сообщение
3. Откройте в браузере: `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates`
4. Найдите в ответе `"chat":{"id":123456789}` - это ваш chat_id

### Вариант 2: Для группового чата
1. Добавьте бота в группу
2. Отправьте в группу любое сообщение
3. Откройте в браузере: `https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates`
4. Найдите в ответе `"chat":{"id":-123456789}` - это chat_id группы (отрицательное число)

## Шаг 3: Настройка переменных окружения

Создайте или отредактируйте файл `.env` в корне проекта:

```env
# Telegram Bot Settings
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_CHAT_ID=your_chat_id_here
TELEGRAM_ENABLED=true
```

## Шаг 4: Установка зависимостей

```bash
pip install python-telegram-bot>=20.0
```

## Шаг 5: Тестирование

После настройки бот будет автоматически отправлять уведомления при запуске бектестинга:

1. **Уведомление о начале бектестинга** - отправляется сразу при запуске
2. **Подробная сводка результатов** - отправляется после завершения бектестинга
3. **JSON файл с детальными данными** - прикрепляется к сводке
4. **Уведомление об ошибке** - отправляется в случае сбоя

## Формат уведомлений

### Краткая сводка включает:
- Период бектестинга
- Разрешение данных
- Стоимость сделок
- Ключевые метрики (доходность, коэффициент Шарпа, максимальная просадка, количество сделок, процент выигрышных сделок)
- Количество активных исполнителей
- Название стратегии

### Детальный JSON файл содержит:
- Полную конфигурацию бектестинга
- Все результаты
- Информацию об исполнителях
- Сводку обработанных данных

## Безопасность

- Никогда не публикуйте токен бота в публичных репозиториях
- Используйте переменные окружения для хранения чувствительных данных
- Регулярно обновляйте токен бота при необходимости

## Устранение неполадок

1. **Бот не отправляет сообщения**: Проверьте правильность токена и chat_id
2. **Ошибка "Forbidden"**: Убедитесь, что бот добавлен в чат и имеет права на отправку сообщений
3. **Ошибка "Chat not found"**: Проверьте правильность chat_id
4. **Бот не отвечает**: Убедитесь, что переменная `TELEGRAM_ENABLED=true` 